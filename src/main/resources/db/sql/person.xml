<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <comment>SQL requests to table PERSON</comment>

    <entry key="find.by.guid">
        select guid, registration_date, dissolution_date, permissions_id, first_name, second_name, nick_name, info, age, gender, town
        from PERSON
        where guid=:guid
    </entry>

    <entry key="add.person">
        insert into
            PERSON(guid, registration_date, dissolution_date, permissions_id, first_name, second_name, nick_name, info, age, gender, town)
            values(:guid, NOW(), null, 1, :first_name, :second_name, :nick_name, :info, :age, :gender, :town)
    </entry>

    <entry key="update.person">
        update PERSON
        set first_name=:first_name, second_name=:second_name, nick_name=:nick_name, info=:info, age=:age, gender=:gender, town=:town
        where guid=:guid
    </entry>

    <entry key="find.not.friend.persons">
        select p.guid, p.registration_date, p.dissolution_date, p.permissions_id, p.first_name, p.second_name, p.nick_name, p.info, p.age, p.gender, p.town
        from PERSON p
        left join PERSON_FRIENDS pf on pf.friend_guid = p.guid and pf.person_guid = :guid
        where pf.friend_guid is null and p.guid != :guid
        limit 1000
    </entry>

    <entry key="find.friend.persons">
        select guid, registration_date, dissolution_date, permissions_id, first_name, second_name, nick_name, info, age, gender, town
        from PERSON p
        left join PERSON_FRIENDS pf on pf.friend_guid = p.guid and pf.person_guid = :guid
        where pf.friend_guid is not null
        limit 1000
    </entry>

    <entry key="find.persons">
        select p.guid, p.registration_date, p.dissolution_date, p.permissions_id, p.first_name, p.second_name, p.nick_name, p.info, p.age, p.gender, p.town
        from PERSON p
        left join PERSON_FRIENDS pf on pf.friend_guid = p.guid and pf.person_guid = :guid
        where pf.friend_guid is null
            and p.guid != :guid
            and p.first_name like :first_name
            and p.second_name like :second_name
        order by p.id
        limit 1000
    </entry>
</properties>
